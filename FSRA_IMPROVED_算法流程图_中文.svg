<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="1600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .input-box { fill: #f3e5f5; stroke: #4a148c; stroke-width: 2; }
      .innovation-box { fill: #e1f5fe; stroke: #01579b; stroke-width: 3; }
      .process-box { fill: #fff3e0; stroke: #e65100; stroke-width: 2; }
      .output-box { fill: #e8f5e8; stroke: #1b5e20; stroke-width: 2; }
      .text { font-family: "Microsoft YaHei", Arial, sans-serif; font-size: 12px; text-anchor: middle; }
      .title-text { font-family: "Microsoft YaHei", Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; }
      .small-text { font-family: "Microsoft YaHei", Arial, sans-serif; font-size: 10px; text-anchor: middle; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- æ ‡é¢˜ -->
  <text x="600" y="30" class="title-text" font-size="18" fill="#01579b">FSRA_IMPROVED ç®—æ³•æµç¨‹å›¾</text>
  <text x="600" y="50" class="text" fill="#666">ç¤¾åŒºèšç±» + PCAç‰¹å¾å¯¹é½</text>
  
  <!-- è¾“å…¥å±‚ -->
  <rect x="450" y="80" width="300" height="60" rx="10" class="input-box"/>
  <text x="600" y="105" class="title-text">è¾“å…¥å›¾åƒ</text>
  <text x="600" y="120" class="small-text">å«æ˜Ÿå›¾åƒ &amp; æ— äººæœºå›¾åƒ</text>
  <text x="600" y="135" class="small-text">å½¢çŠ¶: (B, 3, 256, 256)</text>
  
  <!-- ResNetéª¨å¹²ç½‘ç»œ -->
  <rect x="450" y="180" width="300" height="50" rx="10" class="process-box"/>
  <text x="600" y="200" class="title-text">ResNet18 éª¨å¹²ç½‘ç»œ</text>
  <text x="600" y="215" class="small-text">ç‰¹å¾æå–</text>
  
  <!-- ç‰¹å¾å›¾ -->
  <rect x="450" y="270" width="300" height="60" rx="10" class="process-box"/>
  <text x="600" y="295" class="title-text">ç‰¹å¾å›¾</text>
  <text x="600" y="310" class="small-text">å½¢çŠ¶: (B, 512, 8, 8)</text>
  <text x="600" y="325" class="small-text">å°ºåº¦: 8Ã—8 ç©ºé—´ç½‘æ ¼</text>
  
  <!-- ç‰¹å¾é‡å¡‘å’Œç»´åº¦å˜æ¢ -->
  <rect x="450" y="370" width="300" height="80" rx="10" class="process-box"/>
  <text x="600" y="395" class="title-text">Reshape &amp; Permute æ“ä½œ</text>
  <text x="600" y="410" class="small-text">Reshape: (B,512,8,8) â†’ (B,512,64)</text>
  <text x="600" y="425" class="small-text">Permute: (B,512,64) â†’ (B,64,512)</text>
  <text x="600" y="440" class="small-text">64ä¸ªç©ºé—´ä½ç½®ï¼Œæ¯ä¸ªä½ç½®512ç»´ç‰¹å¾</text>
  
  <!-- åˆ†æ”¯åˆ°ä¸¤ä¸ªæ¨¡å— -->
  <!-- å·¦åˆ†æ”¯: ç¤¾åŒºèšç±» -->
  <rect x="50" y="500" width="350" height="80" rx="10" class="innovation-box"/>
  <text x="225" y="525" class="title-text">ğŸ”¬ ç¤¾åŒºèšç±»æ¨¡å—</text>
  <text x="225" y="540" class="text">åˆ›æ–°ç‚¹1: åŸºäºå›¾çš„èšç±»</text>
  <text x="225" y="555" class="small-text">é€æ ·æœ¬å¤„ç†</text>
  <text x="225" y="570" class="small-text">è¾“å…¥: (64, 512) â†’ è¾“å‡º: (3, 512)</text>
  
  <!-- ç¤¾åŒºèšç±»è¯¦ç»†æ­¥éª¤ -->
  <rect x="50" y="620" width="160" height="60" rx="5" class="process-box"/>
  <text x="130" y="640" class="text">ç›¸ä¼¼åº¦å›¾æ„å»º</text>
  <text x="130" y="655" class="small-text">å½¢çŠ¶: (64, 64)</text>
  <text x="130" y="670" class="small-text">ä½™å¼¦ç›¸ä¼¼åº¦</text>
  
  <rect x="240" y="620" width="160" height="60" rx="5" class="process-box"/>
  <text x="320" y="640" class="text">ç¤¾åŒºæ£€æµ‹</text>
  <text x="320" y="655" class="small-text">Louvainç®—æ³•</text>
  <text x="320" y="670" class="small-text">è¾“å‡º: 3ä¸ªç¤¾åŒº</text>
  
  <!-- PCAå¯¹é½ -->
  <rect x="50" y="720" width="350" height="80" rx="10" class="innovation-box"/>
  <text x="225" y="745" class="title-text">ğŸ“Š PCAå¯¹é½æ¨¡å—</text>
  <text x="225" y="760" class="text">åˆ›æ–°ç‚¹2: ç‰¹å¾å¯¹é½</text>
  <text x="225" y="775" class="small-text">è¾“å…¥: (3, 512) â†’ è¾“å‡º: (3, 256)</text>
  <text x="225" y="790" class="small-text">è·¨è§†è§’ä¸€è‡´æ€§</text>
  
  <!-- å³åˆ†æ”¯: å…¨å±€å¤„ç† -->
  <rect x="800" y="500" width="300" height="60" rx="10" class="process-box"/>
  <text x="950" y="525" class="title-text">å…¨å±€å¹³å‡æ± åŒ–</text>
  <text x="950" y="540" class="small-text">å½¢çŠ¶: (B, 64, 512) â†’ (B, 512)</text>
  
  <rect x="800" y="600" width="300" height="50" rx="10" class="process-box"/>
  <text x="950" y="620" class="title-text">å…¨å±€åˆ†ç±»å™¨</text>
  <text x="950" y="635" class="small-text">è¾“å…¥: (512) â†’ è¾“å‡º: (701)</text>
  
  <!-- åŒºåŸŸåˆ†ç±»å™¨ -->
  <rect x="50" y="840" width="350" height="60" rx="10" class="process-box"/>
  <text x="225" y="865" class="title-text">åŒºåŸŸåˆ†ç±»å™¨</text>
  <text x="225" y="880" class="small-text">3ä¸ªå¹¶è¡ŒClassBlock: (256) â†’ (701)</text>
  
  <!-- ç‰¹å¾èåˆ -->
  <rect x="450" y="940" width="300" height="80" rx="10" class="process-box"/>
  <text x="600" y="965" class="title-text">ç‰¹å¾èåˆ</text>
  <text x="600" y="980" class="small-text">å…¨å±€: (B, 512) + åŒºåŸŸ: (B, 3Ã—256)</text>
  <text x="600" y="995" class="small-text">èåˆå½¢çŠ¶: (B, 1280)</text>
  <text x="600" y="1010" class="small-text">çº¿æ€§å±‚(1280 â†’ 512) + BN + ReLU</text>
  
  <!-- æœ€ç»ˆåˆ†ç±»å™¨ -->
  <rect x="450" y="1060" width="300" height="50" rx="10" class="process-box"/>
  <text x="600" y="1080" class="title-text">æœ€ç»ˆåˆ†ç±»å™¨</text>
  <text x="600" y="1095" class="small-text">è¾“å…¥: (512) â†’ è¾“å‡º: (701)</text>
  
  <!-- å¤šå±‚æ¬¡è¾“å‡º -->
  <rect x="400" y="1150" width="400" height="80" rx="10" class="output-box"/>
  <text x="600" y="1175" class="title-text">å¤šå±‚æ¬¡è¾“å‡º</text>
  <text x="600" y="1190" class="small-text">å…¨å±€ + åŒºåŸŸ + èåˆé¢„æµ‹</text>
  <text x="600" y="1205" class="small-text">æ€»è®¡: 5ä¸ªé¢„æµ‹å±‚æ¬¡</text>
  <text x="600" y="1220" class="small-text">å½¢çŠ¶: (B, 701) æ¯ä¸ª</text>
  
  <!-- åˆ›æ–°äº®ç‚¹æ¡† -->
  <rect x="50" y="1270" width="500" height="120" rx="10" fill="#f8f9fa" stroke="#6c757d" stroke-width="2"/>
  <text x="300" y="1295" class="title-text" fill="#01579b">ğŸ¯ åˆ›æ–°äº®ç‚¹</text>
  <text x="70" y="1315" class="small-text" fill="#333">âœ… 25å€ç©ºé—´åˆ†è¾¨ç‡æå‡: 100 vs 4 ä¸ªç©ºé—´åŒºåŸŸ</text>
  <text x="70" y="1330" class="small-text" fill="#333">âœ… è‡ªé€‚åº”èšç±»: åŸºäºå†…å®¹ vs å‡ ä½•åˆ’åˆ†</text>
  <text x="70" y="1345" class="small-text" fill="#333">âœ… ç‰¹å¾å¯¹é½: PCAè·¨è§†è§’ä¸€è‡´æ€§</text>
  <text x="70" y="1360" class="small-text" fill="#333">âœ… å‚æ•°æ•ˆç‡: 15.1M vs 15.9M (å‡å°‘5%)</text>
  <text x="70" y="1375" class="small-text" fill="#333">âœ… å†…å­˜ä¼˜åŒ–: 1280D vs 2048D èåˆ (å‡å°‘37%)</text>
  
  <!-- æŠ€æœ¯è§„æ ¼æ¡† -->
  <rect x="600" y="1270" width="500" height="120" rx="10" fill="#f8f9fa" stroke="#6c757d" stroke-width="2"/>
  <text x="850" y="1295" class="title-text" fill="#e65100">âš™ï¸ æŠ€æœ¯è§„æ ¼</text>
  <text x="620" y="1315" class="small-text" fill="#333">ğŸ“Š è®¡ç®—å¤æ‚åº¦: O(64Â²) æ¯æ ·æœ¬</text>
  <text x="620" y="1330" class="small-text" fill="#333">ğŸ’¾ å†…å­˜ä½¿ç”¨: ~21KB æ¯æ ·æœ¬ + 1MB PCAæ¨¡å‹</text>
  <text x="620" y="1345" class="small-text" fill="#333">ğŸ”¬ ç¤¾åŒºæ£€æµ‹: Louvainç®—æ³• + K-meansåå¤‡</text>
  <text x="620" y="1360" class="small-text" fill="#333">ğŸ“ PCAé…ç½®: åŠ¨æ€æ‹Ÿåˆï¼Œç›®æ ‡256ç»´</text>
  <text x="620" y="1375" class="small-text" fill="#333">ğŸ¯ æ‰¹å¤„ç†: é€æ ·æœ¬èšç±»ï¼Œæ‰¹é‡è®­ç»ƒ</text>
  
  <!-- ç®­å¤´ -->
  <line x1="600" y1="140" x2="600" y2="180" class="arrow"/>
  <line x1="600" y1="230" x2="600" y2="270" class="arrow"/>
  <line x1="600" y1="330" x2="600" y2="370" class="arrow"/>
  
  <!-- åˆ†æ”¯ç®­å¤´ -->
  <line x1="600" y1="450" x2="225" y2="500" class="arrow"/>
  <line x1="600" y1="450" x2="950" y2="500" class="arrow"/>
  
  <!-- ç¤¾åŒºèšç±»æµç¨‹ -->
  <line x1="225" y1="580" x2="130" y2="620" class="arrow"/>
  <line x1="225" y1="580" x2="320" y2="620" class="arrow"/>
  <line x1="130" y1="680" x2="225" y2="720" class="arrow"/>
  <line x1="320" y1="680" x2="225" y2="720" class="arrow"/>
  <line x1="225" y1="800" x2="225" y2="840" class="arrow"/>
  
  <!-- å…¨å±€æµç¨‹ -->
  <line x1="950" y1="560" x2="950" y2="600" class="arrow"/>
  
  <!-- èåˆç®­å¤´ -->
  <line x1="225" y1="900" x2="500" y2="940" class="arrow"/>
  <line x1="950" y1="650" x2="700" y2="940" class="arrow"/>
  
  <!-- æœ€ç»ˆæµç¨‹ -->
  <line x1="600" y1="1020" x2="600" y2="1060" class="arrow"/>
  <line x1="600" y1="1110" x2="600" y2="1150" class="arrow"/>
  
</svg>
