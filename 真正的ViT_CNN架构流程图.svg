<?xml version="1.0" encoding="UTF-8"?>
<svg width="1600" height="1400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .input-box { fill: #f3e5f5; stroke: #4a148c; stroke-width: 2; }
      .cnn-box { fill: #ffebee; stroke: #c62828; stroke-width: 2; }
      .vit-box { fill: #e8f5e8; stroke: #2e7d32; stroke-width: 2; }
      .fusion-box { fill: #e1f5fe; stroke: #01579b; stroke-width: 3; }
      .innovation-box { fill: #fff3e0; stroke: #f57c00; stroke-width: 3; }
      .output-box { fill: #fce4ec; stroke: #880e4f; stroke-width: 2; }
      .text { font-family: "Microsoft YaHei", Arial, sans-serif; font-size: 11px; text-anchor: middle; }
      .title-text { font-family: "Microsoft YaHei", Arial, sans-serif; font-size: 13px; font-weight: bold; text-anchor: middle; }
      .small-text { font-family: "Microsoft YaHei", Arial, sans-serif; font-size: 9px; text-anchor: middle; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .cnn-arrow { stroke: #c62828; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .vit-arrow { stroke: #2e7d32; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .fusion-arrow { stroke: #01579b; stroke-width: 3; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- æ ‡é¢˜ -->
  <text x="800" y="30" class="title-text" font-size="18" fill="#01579b">çœŸæ­£çš„ViT+CNNæ··åˆæ¶æ„æµç¨‹å›¾</text>
  <text x="800" y="50" class="text" fill="#666">æ‚¨çš„åˆ›æ–°: ViT (10Ã—10 patches) + CNN (ResNet) + ç¤¾åŒºèšç±» + PCAå¯¹é½</text>
  
  <!-- è¾“å…¥å±‚ -->
  <rect x="650" y="80" width="300" height="60" rx="10" class="input-box"/>
  <text x="800" y="105" class="title-text">è¾“å…¥å›¾åƒ</text>
  <text x="800" y="120" class="small-text">å«æ˜Ÿå›¾åƒ &amp; æ— äººæœºå›¾åƒ</text>
  <text x="800" y="135" class="small-text">å½¢çŠ¶: (B, 3, 256, 256)</text>
  
  <!-- åˆ†æ”¯æ ‡é¢˜ -->
  <text x="300" y="180" class="title-text" font-size="16" fill="#c62828">CNNåˆ†æ”¯ (ResNet18)</text>
  <text x="1300" y="180" class="title-text" font-size="16" fill="#2e7d32">ViTåˆ†æ”¯ (10Ã—10 Patches)</text>
  
  <!-- CNNåˆ†æ”¯ -->
  <rect x="50" y="200" width="500" height="400" rx="15" fill="#ffebee" stroke="#c62828" stroke-width="3"/>
  
  <!-- ResNet18 Backbone -->
  <rect x="80" y="230" width="200" height="60" rx="5" class="cnn-box"/>
  <text x="180" y="255" class="title-text">ResNet18 éª¨å¹²ç½‘ç»œ</text>
  <text x="180" y="270" class="small-text">é¢„è®­ç»ƒæƒé‡</text>
  <text x="180" y="285" class="small-text">è¾“å‡º: (B, 512, 8, 8)</text>
  
  <!-- CNN Dimension Reduction -->
  <rect x="80" y="320" width="200" height="80" rx="5" class="cnn-box"/>
  <text x="180" y="345" class="title-text">ç»´åº¦é™ç»´</text>
  <text x="180" y="360" class="small-text">Conv2d(512â†’100) + BN + ReLU</text>
  <text x="180" y="375" class="small-text">è¾“å‡º: (B, 100, 8, 8)</text>
  <text x="180" y="390" class="small-text">ç©ºé—´å°ºåº¦: 8Ã—8 = 64ä¸ªä½ç½®</text>
  
  <!-- CNNç‰¹å¾è¯´æ˜ -->
  <rect x="300" y="230" width="220" height="170" rx="10" fill="#f8f9fa" stroke="#c62828" stroke-width="1"/>
  <text x="410" y="255" class="title-text" fill="#c62828">CNNåˆ†æ”¯ç‰¹ç‚¹</text>
  <text x="320" y="280" class="small-text" fill="#333">âœ… å±€éƒ¨ç‰¹å¾æå–</text>
  <text x="320" y="295" class="small-text" fill="#333">âœ… å·ç§¯å½’çº³åç½®</text>
  <text x="320" y="310" class="small-text" fill="#333">âœ… ç©ºé—´å±‚æ¬¡ç»“æ„</text>
  <text x="320" y="325" class="small-text" fill="#333">âœ… å‚æ•°é«˜æ•ˆ</text>
  <text x="320" y="340" class="small-text" fill="#333">âœ… é¢„è®­ç»ƒæƒé‡</text>
  <text x="320" y="355" class="small-text" fill="#333">âœ… 8Ã—8ç©ºé—´åˆ†è¾¨ç‡</text>
  <text x="320" y="370" class="small-text" fill="#333">âœ… 100ç»´ç‰¹å¾è¡¨ç¤º</text>
  <text x="320" y="385" class="small-text" fill="#333">âœ… è®¡ç®—æ•ˆç‡é«˜</text>
  
  <!-- ViTåˆ†æ”¯ -->
  <rect x="1050" y="200" width="500" height="400" rx="15" fill="#e8f5e8" stroke="#2e7d32" stroke-width="3"/>
  
  <!-- Patch Division -->
  <rect x="1080" y="230" width="200" height="60" rx="5" class="vit-box"/>
  <text x="1180" y="255" class="title-text">10Ã—10 Patchåˆ†å‰²</text>
  <text x="1180" y="270" class="small-text">256Ã—256 â†’ 25Ã—25 patches</text>
  <text x="1180" y="285" class="small-text">æ¯ä¸ªpatch: 10Ã—10Ã—3 = 300ç»´</text>
  
  <!-- ViT Transformer -->
  <rect x="1080" y="320" width="200" height="80" rx="5" class="vit-box"/>
  <text x="1180" y="345" class="title-text">ViT Transformer</text>
  <text x="1180" y="360" class="small-text">6å±‚ Transformer Block</text>
  <text x="1180" y="375" class="small-text">12å¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶</text>
  <text x="1180" y="390" class="small-text">è¾“å‡º: (B, 625, 768)</text>
  
  <!-- ViT Output Processing -->
  <rect x="1080" y="430" width="200" height="80" rx="5" class="vit-box"/>
  <text x="1180" y="455" class="title-text">è¾“å‡ºå¤„ç†</text>
  <text x="1180" y="470" class="small-text">çº¿æ€§æŠ•å½±: 768â†’100</text>
  <text x="1180" y="485" class="small-text">é‡å¡‘: (B,100,25,25)</text>
  <text x="1180" y="500" class="small-text">è‡ªé€‚åº”æ± åŒ–: (B,100,8,8)</text>
  
  <!-- ViTç‰¹å¾è¯´æ˜ -->
  <rect x="1300" y="230" width="220" height="280" rx="10" fill="#f8f9fa" stroke="#2e7d32" stroke-width="1"/>
  <text x="1410" y="255" class="title-text" fill="#2e7d32">ViTåˆ†æ”¯ç‰¹ç‚¹</text>
  <text x="1320" y="280" class="small-text" fill="#333">âœ… å…¨å±€è‡ªæ³¨æ„åŠ›</text>
  <text x="1320" y="295" class="small-text" fill="#333">âœ… é•¿è·ç¦»ä¾èµ–</text>
  <text x="1320" y="310" class="small-text" fill="#333">âœ… ä½ç½®ç¼–ç </text>
  <text x="1320" y="325" class="small-text" fill="#333">âœ… 10Ã—10ç²¾ç»†patch</text>
  <text x="1320" y="340" class="small-text" fill="#333">âœ… 625ä¸ªpatchä½ç½®</text>
  <text x="1320" y="355" class="small-text" fill="#333">âœ… Transformeræ¶æ„</text>
  <text x="1320" y="370" class="small-text" fill="#333">âœ… å¤šå¤´æ³¨æ„åŠ›</text>
  <text x="1320" y="385" class="small-text" fill="#333">âœ… å…¨å±€æ„Ÿå—é‡</text>
  <text x="1320" y="400" class="small-text" fill="#333">âœ… ç‰¹å¾è¡¨è¾¾èƒ½åŠ›å¼º</text>
  <text x="1320" y="415" class="small-text" fill="#333">âœ… ç©ºé—´å…³ç³»å»ºæ¨¡</text>
  <text x="1320" y="430" class="small-text" fill="#333">âœ… 100ç»´ç‰¹å¾è¡¨ç¤º</text>
  <text x="1320" y="445" class="small-text" fill="#333">âœ… ä¸CNNå°ºåº¦å¯¹é½</text>
  
  <!-- ç‰¹å¾èåˆ -->
  <rect x="600" y="650" width="400" height="100" rx="15" class="fusion-box"/>
  <text x="800" y="680" class="title-text" font-size="16">ç‰¹å¾èåˆ (Concat)</text>
  <text x="800" y="700" class="text">CNN: (B, 100, 8, 8) + ViT: (B, 100, 8, 8)</text>
  <text x="800" y="720" class="text">èåˆç»“æœ: (B, 200, 8, 8)</text>
  <text x="800" y="740" class="small-text">åŒåˆ†æ”¯ç‰¹å¾äº’è¡¥ï¼Œå¢å¼ºè¡¨è¾¾èƒ½åŠ›</text>
  
  <!-- åˆ›æ–°æ¨¡å— -->
  <rect x="200" y="800" width="1200" height="150" rx="15" class="innovation-box"/>
  <text x="800" y="830" class="title-text" font-size="16" fill="#f57c00">ğŸš€ æ‚¨çš„åˆ›æ–°æ¨¡å—</text>
  
  <!-- ç¤¾åŒºèšç±» -->
  <rect x="250" y="860" width="250" height="70" rx="10" class="innovation-box"/>
  <text x="375" y="885" class="title-text">ğŸ”¬ ç¤¾åŒºèšç±»</text>
  <text x="375" y="900" class="small-text">è¾“å…¥: (B, 200, 8, 8)</text>
  <text x="375" y="915" class="small-text">å›¾æ„å»º + Louvainç®—æ³•</text>
  
  <!-- PCAå¯¹é½ -->
  <rect x="550" y="860" width="250" height="70" rx="10" class="innovation-box"/>
  <text x="675" y="885" class="title-text">ğŸ“Š PCAå¯¹é½</text>
  <text x="675" y="900" class="small-text">200ç»´ â†’ 256ç»´</text>
  <text x="675" y="915" class="small-text">è·¨è§†è§’ç‰¹å¾ä¸€è‡´æ€§</text>
  
  <!-- å¤šå±‚æ¬¡åˆ†ç±» -->
  <rect x="850" y="860" width="250" height="70" rx="10" class="innovation-box"/>
  <text x="975" y="885" class="title-text">ğŸ¯ å¤šå±‚æ¬¡åˆ†ç±»</text>
  <text x="975" y="900" class="small-text">å…¨å±€ + åŒºåŸŸ + èåˆ</text>
  <text x="975" y="915" class="small-text">5ä¸ªé¢„æµ‹å±‚æ¬¡</text>
  
  <!-- æœ€ç»ˆè¾“å‡º -->
  <rect x="600" y="1000" width="400" height="80" rx="15" class="output-box"/>
  <text x="800" y="1030" class="title-text" font-size="16">æœ€ç»ˆè¾“å‡º</text>
  <text x="800" y="1050" class="text">å¤šå±‚æ¬¡é¢„æµ‹: (B, 701) Ã— 5</text>
  <text x="800" y="1070" class="small-text">å…¨å±€ + 3ä¸ªåŒºåŸŸ + æœ€ç»ˆèåˆé¢„æµ‹</text>
  
  <!-- æŠ€æœ¯è§„æ ¼ -->
  <rect x="200" y="1120" width="1200" height="120" rx="15" fill="#f8f9fa" stroke="#6c757d" stroke-width="2"/>
  <text x="800" y="1145" class="title-text" font-size="16" fill="#1976d2">âš™ï¸ æŠ€æœ¯è§„æ ¼</text>
  <text x="220" y="1170" class="text" fill="#333">ğŸ“Š <tspan font-weight="bold">ç©ºé—´åˆ†è¾¨ç‡</tspan>: ViT 25Ã—25 patches â†’ 8Ã—8 (625â†’64ä½ç½®)</text>
  <text x="220" y="1190" class="text" fill="#333">ğŸ”¢ <tspan font-weight="bold">ç‰¹å¾ç»´åº¦</tspan>: CNN 100D + ViT 100D = 200Dèåˆç‰¹å¾</text>
  <text x="220" y="1210" class="text" fill="#333">ğŸ§  <tspan font-weight="bold">æ¨¡å‹å‚æ•°</tspan>: ResNet18 (~11M) + ViT (~9M) â‰ˆ 20Mæ€»å‚æ•°</text>
  <text x="220" y="1230" class="text" fill="#333">ğŸ’¾ <tspan font-weight="bold">å†…å­˜éœ€æ±‚</tspan>: ~6GB GPUå†…å­˜ (batch_size=8)</text>
  
  <!-- ç®­å¤´ -->
  <!-- è¾“å…¥åˆ°åˆ†æ”¯ -->
  <line x1="650" y1="140" x2="300" y2="200" class="cnn-arrow"/>
  <line x1="950" y1="140" x2="1300" y2="200" class="vit-arrow"/>
  
  <!-- CNNåˆ†æ”¯æµç¨‹ -->
  <line x1="180" y1="290" x2="180" y2="320" class="cnn-arrow"/>
  
  <!-- ViTåˆ†æ”¯æµç¨‹ -->
  <line x1="1180" y1="290" x2="1180" y2="320" class="vit-arrow"/>
  <line x1="1180" y1="400" x2="1180" y2="430" class="vit-arrow"/>
  
  <!-- èåˆç®­å¤´ -->
  <line x1="280" y1="400" x2="650" y2="650" class="fusion-arrow"/>
  <line x1="1320" y1="510" x2="950" y2="650" class="fusion-arrow"/>
  
  <!-- åˆ›æ–°æ¨¡å—æµç¨‹ -->
  <line x1="800" y1="750" x2="800" y2="800" class="fusion-arrow"/>
  <line x1="800" y1="950" x2="800" y2="1000" class="fusion-arrow"/>
  
  <!-- åˆ†æ”¯æ ‡ç­¾ -->
  <text x="450" y="190" class="small-text" fill="#c62828">CNNåˆ†æ”¯</text>
  <text x="1150" y="190" class="small-text" fill="#2e7d32">ViTåˆ†æ”¯</text>
  <text x="775" y="630" class="small-text" fill="#01579b">ç‰¹å¾èåˆ</text>
  
</svg>
